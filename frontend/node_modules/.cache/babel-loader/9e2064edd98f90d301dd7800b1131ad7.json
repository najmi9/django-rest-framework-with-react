{"ast":null,"code":"import _regeneratorRuntime from\"/home/chemime/Desktop/Python/django/trainingapp/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/chemime/Desktop/Python/django/trainingapp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/chemime/Desktop/Python/django/trainingapp/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/chemime/Desktop/Python/django/trainingapp/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/chemime/Desktop/Python/django/trainingapp/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{authenticate}from'../service/AuthAPI';import{toast}from'react-toastify';import{Link}from'react-router-dom';var Login=function Login(_ref){var history=_ref.history;var _useState=useState({'email':'','password':''}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var apiErrors={};var handleChange=function handleChange(_ref2){var currentTarget=_ref2.currentTarget;var name=currentTarget.name,value=currentTarget.value;setCredentials(_objectSpread({},credentials,_defineProperty({},name,value)));};var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);e.preventDefault();_context.prev=2;_context.next=5;return authenticate(credentials);case 5:response=_context.sent;toast.success('Votre connexion a été bien fait');setLoading(false);history.push(\"/\");_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);setLoading(false);case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function handleSubmit(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"bg-light container p-4 mt-4\",id:\"login-desktop\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"text-center text-success m-3\"},\" Connexion au site\"),loading&&/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center text-success\",role:\"status\",id:\"spinner\"},/*#__PURE__*/React.createElement(\"div\",{className:\"spinner-border\",role:\"status\",style:{\"width\":3+\"rem\",\"height\":3+\"rem\",\"margin\":40+\"px\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Loading...\"))),!loading&&/*#__PURE__*/React.createElement(\"div\",{className:\"bg-light text-center m-2\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-envelope\"}))),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",placeholder:\"Entrez votre email ...\",className:\"form-control\",onChange:handleChange,value:credentials.email,name:\"email\",required:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-lock\"}))),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"Entrez votre mot de pass ...\",className:\"form-control\",name:\"password\",onChange:handleChange,value:credentials.password,required:true}))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\"},\" Connexion !\")),/*#__PURE__*/React.createElement(\"div\",{className:\"m-3\"},/*#__PURE__*/React.createElement(Link,{to:\"/reset-password\",className:\"btn\"},\"J'ai oubli\\xE9 le mot de passe ?\"))));};export default Login;","map":{"version":3,"sources":["/home/chemime/Desktop/Python/django/trainingapp/frontend/src/Pages/Login.jsx"],"names":["React","useState","authenticate","toast","Link","Login","history","credentials","setCredentials","loading","setLoading","apiErrors","handleChange","currentTarget","name","value","handleSubmit","e","preventDefault","response","success","push","email","password"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport {authenticate} from '../service/AuthAPI';\nimport { toast } from 'react-toastify';\nimport { Link } from 'react-router-dom';\n\nconst Login = ({ history}) => {\n const [credentials, setCredentials] = useState({\n  'email': '',\n  'password': ''\n })\n\n const [loading, setLoading] =useState(false);\n\n const apiErrors = {};\n \n  const handleChange = ({ currentTarget })=>{\n    const {name, value } = currentTarget;\n    setCredentials({...credentials, [name]: value})\n  }\n\n\n     const handleSubmit =async  e =>{\n       setLoading(true);\n       e.preventDefault();\n    try {\n      const response = await authenticate(credentials);\n      toast.success('Votre connexion a été bien fait');\n      setLoading(false);\n      history.push(\"/\");\n    } catch(error) {\n      setLoading(false);\n   \n    }\n  }\n\treturn <div className=\"bg-light container p-4 mt-4\" id=\"login-desktop\">\n      <h5 className=\"text-center text-success m-3\"> Connexion au site</h5>\n      {loading && (<div className=\"d-flex justify-content-center text-success\" \n           role=\"status\" id=\"spinner\">\n           <div className=\"spinner-border\" role=\"status\" style={{\"width\": 3+\"rem\", \"height\": 3+\"rem\", \"margin\": 40+\"px\"}} >\n              <span className=\"sr-only\">Loading...</span>\n           </div>\n              </div>)\n            }\n\n      {!loading && (<div className=\"bg-light text-center m-2\">\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <div className=\"input-group mb-2\">\n               <div className=\"input-group-prepend\">\n                 <div className=\"input-group-text\"><i className=\"fas fa-envelope\"></i>\n                 </div>\n               </div>\n               <input type=\"email\" placeholder=\"Entrez votre email ...\"\n                className=\"form-control\" onChange={handleChange} \n                  value={credentials.email} name=\"email\" required={true} />\n            </div>\n          </div>\n\n          <div className=\"form-group\">\n           <div className=\"input-group mb-2\">\n             <div className=\"input-group-prepend\">\n              <div className=\"input-group-text\"><i className=\"fas fa-lock\"></i>\n              </div>\n            </div>\n            <input type=\"password\" placeholder=\"Entrez votre mot de pass ...\"\n             className=\"form-control\"  name=\"password\"\n            onChange={handleChange}  value={credentials.password} \n            required={true} />\n          </div>\n        </div>\n         <button type=\"submit\" \n          className=\"btn btn-primary\"> Connexion ! \n          </button>\n\n        </form>\n         <div className=\"m-3\">\n        <Link to=\"/reset-password\" className=\"btn\">\n         J'ai oublié le mot de passe ?\n          </Link>\n\n        </div>\n      </div>)}\n  </div> \n}\n\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\nimport { API_URL } from \"../Config\"; //import Cache from './Cache';\n\nconst LOGIN_API = API_URL + \"/token\";\nconst REGISTER_URL = API_URL + \"/register\";\n\nfunction logout() {\n  localStorage.clear();\n  delete axios.defaults.headers[\"Authorization\"];\n}\n\nfunction authenticate(credentials) {\n  return axios.post(LOGIN_API, credentials).then(response => response.data).then(data => {\n    console.log(data);\n    window.localStorage.setItem(\"authToken\", data.access);\n    window.localStorage.setItem(\"authRefreshToken\", data.refresh);\n    setAxiosToken(data.access);\n  });\n}\n\nfunction setAxiosToken(token) {\n  axios.defaults.headers[\"Authorization\"] = \"Bearer \" + token;\n}\n\nconst setup = async () => {\n  let token = window.localStorage.getItem(\"authToken\");\n\n  if (token) {\n    setAxiosToken(token);\n  }\n};\n\nconst isAuthenticated = () => {\n  let token = window.localStorage.getItem(\"authToken\") || null;\n\n  if (!token) {\n    return false;\n  }\n\n  return true;\n};\n\nexport { authenticate, logout, setup, isAuthenticated };","map":{"version":3,"sources":["/home/chemime/Desktop/Python/django/trainingapp/frontend/src/service/AuthAPI.js"],"names":["axios","jwtDecode","API_URL","LOGIN_API","REGISTER_URL","logout","localStorage","clear","defaults","headers","authenticate","credentials","post","then","response","data","console","log","window","setItem","access","refresh","setAxiosToken","token","setup","getItem","isAuthenticated"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAuB,WAAvB,C,CACA;;AAEA,MAAMC,SAAS,GAAGD,OAAO,GAAC,QAA1B;AACA,MAAME,YAAY,GAAGF,OAAO,GAAG,WAA/B;;AAGA,SAASG,MAAT,GAAkB;AACdC,EAAAA,YAAY,CAACC,KAAb;AACA,SAAOP,KAAK,CAACQ,QAAN,CAAeC,OAAf,CAAuB,eAAvB,CAAP;AACH;;AAGD,SAASC,YAAT,CAAsBC,WAAtB,EAAmC;AACjC,SAAOX,KAAK,CACTY,IADI,CACCT,SADD,EACYQ,WADZ,EAEJE,IAFI,CAECC,QAAQ,IAAIA,QAAQ,CAACC,IAFtB,EAGJF,IAHI,CAGCE,IAAI,IAAI;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACKG,IAAAA,MAAM,CAACZ,YAAP,CAAoBa,OAApB,CAA4B,WAA5B,EAAyCJ,IAAI,CAACK,MAA9C;AACAF,IAAAA,MAAM,CAACZ,YAAP,CAAoBa,OAApB,CAA4B,kBAA5B,EAAgDJ,IAAI,CAACM,OAArD;AACAC,IAAAA,aAAa,CAACP,IAAI,CAACK,MAAN,CAAb;AAEJ,GATI,CAAP;AAUD;;AAGD,SAASE,aAAT,CAAuBC,KAAvB,EAA8B;AAC5BvB,EAAAA,KAAK,CAACQ,QAAN,CAAeC,OAAf,CAAuB,eAAvB,IAA0C,YAAYc,KAAtD;AACD;;AAGD,MAAMC,KAAK,GAAG,YAAY;AACxB,MAAID,KAAK,GAAGL,MAAM,CAACZ,YAAP,CAAoBmB,OAApB,CAA4B,WAA5B,CAAZ;;AACA,MAAIF,KAAJ,EAAW;AACTD,IAAAA,aAAa,CAACC,KAAD,CAAb;AACD;AACF,CALD;;AAOA,MAAMG,eAAe,GAAG,MAAM;AAC5B,MAAIH,KAAK,GAAGL,MAAM,CAACZ,YAAP,CAAoBmB,OAApB,CAA4B,WAA5B,KAA0C,IAAtD;;AACA,MAAI,CAACF,KAAL,EAAY;AACL,WAAO,KAAP;AACJ;;AACH,SAAO,IAAP;AACD,CAND;;AASA,SACEb,YADF,EAEEL,MAFF,EAGEmB,KAHF,EAIEE,eAJF","sourcesContent":["import axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\nimport { API_URL} from \"../Config\";\n//import Cache from './Cache';\n\nconst LOGIN_API = API_URL+\"/token\";\nconst REGISTER_URL = API_URL + \"/register\";\n \n\nfunction logout() {\n    localStorage.clear();\n    delete axios.defaults.headers[\"Authorization\"];\n}\n\n\nfunction authenticate(credentials) {\n  return axios\n    .post(LOGIN_API, credentials)\n    .then(response => response.data)\n    .then(data => {\n    console.log(data)\n         window.localStorage.setItem(\"authToken\", data.access);\n         window.localStorage.setItem(\"authRefreshToken\", data.refresh);\n         setAxiosToken(data.access);\n      \n    });\n}\n\n\nfunction setAxiosToken(token) {\n  axios.defaults.headers[\"Authorization\"] = \"Bearer \" + token;\n}\n\n\nconst setup = async () => {\n  let token = window.localStorage.getItem(\"authToken\");    \n  if (token) {  \n    setAxiosToken(token);  \n  }\n}\n\nconst isAuthenticated = () => {\n  let token = window.localStorage.getItem(\"authToken\")||null;\n  if (!token) {\n         return false;\n    }\n  return true;\n}\n\n\nexport {\n  authenticate,\n  logout,\n  setup,\n  isAuthenticated\n};"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"/home/chemime/Desktop/Python/django/trainingapp/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/chemime/Desktop/Python/django/trainingapp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/chemime/Desktop/Python/django/trainingapp/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/chemime/Desktop/Python/django/trainingapp/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/chemime/Desktop/Python/django/trainingapp/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback}from'react';import{authenticate}from'../service/AuthAPI';import{toast}from'react-toastify';import{Link}from'react-router-dom';import FinalPage from'../Components/FinalPage';var Login=function Login(_ref){var history=_ref.history;var _useState=useState({'email':'','password':''}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var handleChange=useCallback(function(_ref2){var currentTarget=_ref2.currentTarget;var name=currentTarget.name,value=currentTarget.value;setCredentials(_objectSpread({},credentials,_defineProperty({},name,value)));},[loading]);var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);e.preventDefault();_context.prev=2;_context.next=5;return authenticate(credentials);case 5:toast.success('Votre connexion a été bien fait');setLoading(false);history.push(\"/\");_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);setError(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function handleSubmit(_x){return _ref3.apply(this,arguments);};}();var Component=function Component(){return/*#__PURE__*/React.createElement(\"div\",{className:\"bg-light container p-4 mt-4\",id:\"login-desktop\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"text-center text-success m-3\"},\" Connexion au site\"),/*#__PURE__*/React.createElement(\"div\",{className:\"bg-light text-center m-2\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-envelope\"}))),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",placeholder:\"Entrez votre email ...\",className:\"form-control\",onChange:handleChange,value:credentials.email,name:\"email\",required:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group mb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-lock\"}))),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"Entrez votre mot de pass ...\",className:\"form-control\",name:\"password\",onChange:handleChange,value:credentials.password,required:true}))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\"},\" Connexion !\")),/*#__PURE__*/React.createElement(\"div\",{className:\"m-3\"},/*#__PURE__*/React.createElement(Link,{to:\"/reset-password\",className:\"btn\"},\"J'ai oubli\\xE9 le mot de passe ?\"))));};return/*#__PURE__*/React.createElement(FinalPage,{title:\"Login Page\",loading:loading,error:error,Component:Component});};export default Login;","map":{"version":3,"sources":["/home/chemime/Desktop/Python/django/trainingapp/frontend/src/Pages/Login.jsx"],"names":["React","useState","useCallback","authenticate","toast","Link","FinalPage","Login","history","credentials","setCredentials","loading","setLoading","error","setError","handleChange","currentTarget","name","value","handleSubmit","e","preventDefault","success","push","Component","email","password"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from 'react';\nimport {authenticate} from '../service/AuthAPI';\nimport { toast } from 'react-toastify';\nimport { Link } from 'react-router-dom';\nimport FinalPage from '../Components/FinalPage';\n\nconst Login = ({ history}) => {\n const [credentials, setCredentials] = useState({\n  'email': '',\n  'password': ''\n })\n\n const [loading, setLoading] =useState(false);\n const [error, setError] = useState({});\n\n  const handleChange = useCallback(({ currentTarget })=>{\n    const {name, value } = currentTarget;\n    setCredentials({...credentials, [name]: value})\n  }, [loading]); \n\n\n     const handleSubmit =async  e =>{\n       setLoading(true);\n       e.preventDefault();\n    try {\n      await authenticate(credentials);\n      toast.success('Votre connexion a été bien fait');\n      setLoading(false);\n      history.push(\"/\");\n    } catch(error) {\n      setError(error)\n    }\n  }\n  const Component = () =>(<div className=\"bg-light container p-4 mt-4\" id=\"login-desktop\">\n      <h5 className=\"text-center text-success m-3\"> Connexion au site</h5>\n      <div className=\"bg-light text-center m-2\">\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <div className=\"input-group mb-2\">\n               <div className=\"input-group-prepend\">\n                 <div className=\"input-group-text\"><i className=\"fas fa-envelope\"></i>\n                 </div>\n               </div>\n               <input type=\"email\" placeholder=\"Entrez votre email ...\"\n                className=\"form-control\" onChange={handleChange} \n                  value={credentials.email} name=\"email\" required={true} />\n            </div>\n          </div>\n\n          <div className=\"form-group\">\n           <div className=\"input-group mb-2\">\n             <div className=\"input-group-prepend\">\n              <div className=\"input-group-text\"><i className=\"fas fa-lock\"></i>\n              </div>\n            </div>\n            <input type=\"password\" placeholder=\"Entrez votre mot de pass ...\"\n             className=\"form-control\"  name=\"password\"\n            onChange={handleChange}  value={credentials.password} \n            required={true} />\n          </div>\n        </div>\n         <button type=\"submit\" \n          className=\"btn btn-primary\"> Connexion ! \n          </button>\n\n        </form>\n         <div className=\"m-3\">\n        <Link to=\"/reset-password\" className=\"btn\">\n         J'ai oublié le mot de passe ?\n          </Link>\n\n        </div>\n      </div>\n  </div>);\n\n  return (<FinalPage \n          title=\"Login Page\"\n          loading={loading}\n          error={error}\n          Component={Component}\n        />);\n}\n\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}
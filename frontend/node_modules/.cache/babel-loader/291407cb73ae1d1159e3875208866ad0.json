{"ast":null,"code":"import _regeneratorRuntime from\"/home/chemime/Desktop/Python/django/trainingapp/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/chemime/Desktop/Python/django/trainingapp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import jwtDecode from\"jwt-decode\";import{API_URL}from\"../Config\";//import Cache from './Cache';\nvar LOGIN_API=API_URL+\"/token\";var REGISTER_URL=API_URL+\"/register\";function logout(){localStorage.clear();delete axios.defaults.headers[\"Authorization\"];}function authenticate(credentials){return axios.post(LOGIN_API,credentials).then(function(response){return response.data;}).then(function(data){console.log(data);window.localStorage.setItem(\"authToken\",data.access);window.localStorage.setItem(\"authRefreshToken\",data.refresh);setAxiosToken(data.access);});}function setAxiosToken(token){axios.defaults.headers[\"Authorization\"]=\"Bearer \"+token;}var setup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=window.localStorage.getItem(\"authToken\");if(token){setAxiosToken(token);}case 2:case\"end\":return _context.stop();}}},_callee);}));return function setup(){return _ref.apply(this,arguments);};}();var isAuthenticated=function isAuthenticated(){var token=window.localStorage.getItem(\"authToken\")||null;if(!token){return false;}return true;};export{authenticate,logout,setup,isAuthenticated};","map":{"version":3,"sources":["/home/chemime/Desktop/Python/django/trainingapp/frontend/src/service/AuthAPI.js"],"names":["axios","jwtDecode","API_URL","LOGIN_API","REGISTER_URL","logout","localStorage","clear","defaults","headers","authenticate","credentials","post","then","response","data","console","log","window","setItem","access","refresh","setAxiosToken","token","setup","getItem","isAuthenticated"],"mappings":"mRAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,CACA,OAASC,OAAT,KAAuB,WAAvB,CACA;AAEA,GAAMC,CAAAA,SAAS,CAAGD,OAAO,CAAC,QAA1B,CACA,GAAME,CAAAA,YAAY,CAAGF,OAAO,CAAG,WAA/B,CAGA,QAASG,CAAAA,MAAT,EAAkB,CACdC,YAAY,CAACC,KAAb,GACA,MAAOP,CAAAA,KAAK,CAACQ,QAAN,CAAeC,OAAf,CAAuB,eAAvB,CAAP,CACH,CAGD,QAASC,CAAAA,YAAT,CAAsBC,WAAtB,CAAmC,CACjC,MAAOX,CAAAA,KAAK,CACTY,IADI,CACCT,SADD,CACYQ,WADZ,EAEJE,IAFI,CAEC,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAb,EAFT,EAGJF,IAHI,CAGC,SAAAE,IAAI,CAAI,CACdC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACKG,MAAM,CAACZ,YAAP,CAAoBa,OAApB,CAA4B,WAA5B,CAAyCJ,IAAI,CAACK,MAA9C,EACAF,MAAM,CAACZ,YAAP,CAAoBa,OAApB,CAA4B,kBAA5B,CAAgDJ,IAAI,CAACM,OAArD,EACAC,aAAa,CAACP,IAAI,CAACK,MAAN,CAAb,CAEJ,CATI,CAAP,CAUD,CAGD,QAASE,CAAAA,aAAT,CAAuBC,KAAvB,CAA8B,CAC5BvB,KAAK,CAACQ,QAAN,CAAeC,OAAf,CAAuB,eAAvB,EAA0C,UAAYc,KAAtD,CACD,CAGD,GAAMC,CAAAA,KAAK,0FAAG,6IACRD,KADQ,CACAL,MAAM,CAACZ,YAAP,CAAoBmB,OAApB,CAA4B,WAA5B,CADA,CAEZ,GAAIF,KAAJ,CAAW,CACTD,aAAa,CAACC,KAAD,CAAb,CACD,CAJW,sDAAH,kBAALC,CAAAA,KAAK,0CAAX,CAOA,GAAME,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B,GAAIH,CAAAA,KAAK,CAAGL,MAAM,CAACZ,YAAP,CAAoBmB,OAApB,CAA4B,WAA5B,GAA0C,IAAtD,CACA,GAAI,CAACF,KAAL,CAAY,CACL,MAAO,MAAP,CACJ,CACH,MAAO,KAAP,CACD,CAND,CASA,OACEb,YADF,CAEEL,MAFF,CAGEmB,KAHF,CAIEE,eAJF","sourcesContent":["import axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\nimport { API_URL} from \"../Config\";\n//import Cache from './Cache';\n\nconst LOGIN_API = API_URL+\"/token\";\nconst REGISTER_URL = API_URL + \"/register\";\n \n\nfunction logout() {\n    localStorage.clear();\n    delete axios.defaults.headers[\"Authorization\"];\n}\n\n\nfunction authenticate(credentials) {\n  return axios\n    .post(LOGIN_API, credentials)\n    .then(response => response.data)\n    .then(data => {\n    console.log(data)\n         window.localStorage.setItem(\"authToken\", data.access);\n         window.localStorage.setItem(\"authRefreshToken\", data.refresh);\n         setAxiosToken(data.access);\n      \n    });\n}\n\n\nfunction setAxiosToken(token) {\n  axios.defaults.headers[\"Authorization\"] = \"Bearer \" + token;\n}\n\n\nconst setup = async () => {\n  let token = window.localStorage.getItem(\"authToken\");    \n  if (token) {  \n    setAxiosToken(token);  \n  }\n}\n\nconst isAuthenticated = () => {\n  let token = window.localStorage.getItem(\"authToken\")||null;\n  if (!token) {\n         return false;\n    }\n  return true;\n}\n\n\nexport {\n  authenticate,\n  logout,\n  setup,\n  isAuthenticated\n};"]},"metadata":{},"sourceType":"module"}